@model AdminViewModel

@using System.Security.Claims;
@using CIPlatform_Main.Entities.Models;
@{
    var identity = User.Identity as ClaimsIdentity;
    var name = identity?.FindFirst(ClaimTypes.Name)?.Value;
    var surname = identity?.FindFirst(ClaimTypes.Surname)?.Value;
    var Email = identity?.FindFirst(ClaimTypes.Email)?.Value;
    var uid = identity?.FindFirst(ClaimTypes.Sid)?.Value;

}



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="~/css/User.css">
    <title>User</title>
</head>
<body>
    <div class="container-fluid m-0 " style="width:100vw;">
        <div class="row d-flex">

            <!-- Left Part Div -->
            <div class="navigationbar col-2 col-xl-2 col-lg-3 col-md-1 d-none d-md-block px-2 px-lg-2 px-md-0 ">
                <div class="mt-4 col-12 d-none d-lg-block">
                    <lable class="sideheader fw-bold fs-6 text-white text-break">Navigationbar</lable>
                </div>
                <ul class="nav nav-pills flex-column mb-auto mt-4 mt-lg-4 mt-md-5">

                    <li class="nav-item">
                        <a href="#1" class="nav-link sidebarcontent " aria-current="page">

                            <i class="bi bi-person-fill sidebar-img "></i>
                            <lable class="d-block d-lg-block d-md-none">User</lable>
                        </a>
                    </li>
                    <li>
                        <a href="#CMSPage" class="nav-link sidebarcontent active">

                            <i class="bi bi-file-earmark-text-fill sidebar-img me-2"></i>

                            <lable class="d-block d-lg-block d-md-none"> CMS Page</lable>
                        </a>
                    </li>
                    <li>
                        <a href="#3" class="nav-link sidebarcontent">

                            <i class="bi bi-bullseye sidebar-img me-2"></i>

                            <lable class="d-block d-lg-block d-md-none"> Mission</lable>
                        </a>
                    </li>
                    <li>
                        <a href="#4" class="nav-link sidebarcontent">


                            <i class="bi bi-grid-1x2-fill sidebar-img me-2"></i>

                            <lable class="d-block d-lg-block d-md-none">Mission Theme</lable>
                        </a>
                    </li>
                    <li>
                        <a href="#5" class="nav-link sidebarcontent">

                            <i class="bi bi-tools sidebar-img me-2"></i>

                            <lable class="d-block d-lg-block d-md-none">Mission Skills</lable>
                        </a>
                    </li>
                    <li>
                        <a href="#6" class="nav-link sidebarcontent ">

                            <i class="bi bi-folder-fill sidebar-img me-2"></i>

                            <lable class="d-block d-lg-block d-md-none">Mission Application</lable>
                        </a>
                    </li>
                    <li>
                        <a href="#7" class="nav-link sidebarcontent">

                            <i class="bi bi-book-half sidebar-img me-2"></i>

                            <lable class="d-block d-lg-block d-md-none">Story</lable>
                        </a>
                    </li>
                    <li>
                        <a href="#8" class="nav-link sidebarcontent">

                            <i class="bi bi-border-style sidebar-img me-2"></i>

                            <lable class="d-block d-lg-block d-md-none">Banner Management</lable>
                        </a>
                    </li>

                </ul>
            </div>


            <!-- Right Part Div for Tables -->
            <div class="col-12 col-xl-10 col-lg-9 col-md-11 ">
                <div class="row shadow-lg " style="height:50px;">
                    <div class="col-12 d-flex bg-white ">
                        <div class="col-3 d-block d-md-none d-flex align-items-center">
                            <button class="border-0 bg-white" type="button" data-bs-toggle="offcanvas"
                                    data-bs-target="#Adminoffcanvas" aria-controls="offcanvasWithBothOptions">
                                <i class="bi bi-list " style="font-size:40px;"></i>
                            </button>
                        </div>
                        <div class="col-6 d-flex align-items-center">
                            @{
                                DateTime now = DateTime.Now;
                                string formattedTime = now.ToString("dddd, MMMM d, yyyy, h:mm:ss tt");

                            }
                            @formattedTime
                        </div>
                        <div class="col-6 d-none d-md-block">
                            <div class="dropdown d-flex justify-content-end ">
                                <button class="btn ms-auto me-3 dropdown-toggle " type="button"
                                        data-bs-toggle="dropdown" aria-expanded="false">
                                    <img src="~/Assets/user1.png" alt="mdo" width="40" height="40"
                                         class="rounded-circle loginimg">
                                    Dropdown button
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#">Action</a></li>
                                    <li><a class="dropdown-item" href="#">Another action</a></li>
                                    <li><a class="dropdown-item" href="#">Something else here</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <h3 class="mt-3 ms-3 mb-0">User</h3>
                        <hr class="m-0 mt-2">
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-4 ">
                        <div class="input-group rounded">
                            <input type="search" class="form-control rounded" placeholder="Search" aria-label="Search"
                                   aria-describedby="search-addon" />
                        </div>
                    </div>
                    <div class="col-8">
                        <div class="addBtn float-end">
                            <button type="button" class="btn btn-outline-warning px-3" style="border-radius: 50px;">
                                Add
                            </button>
                        </div>
                    </div>
                </div>
                <div class="row mt-3 mx-2 ">
                    <div class="col-12 table-responsive-sm">
                        <table class="table">
                            <thead class="thead-dark">
                                <tr>
                                    <th scope="col">First Name</th>
                                    <th scope="col">LastName</th>
                                    <th scope="col">Email</th>
                                    <th scope="col">Employee Id</th>
                                    <th scope="col">Department</th>
                                    <th scope="col">Status</th>
                                    <th scope="col">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var user in Model.UserList)
                                {
                                    <tr>
                                        <th scope="row">@user.FirstName</th>
                                        <td>@user.LastName</td>
                                        <td>@user.Email</td>
                                        <td>@user.EmployeeId</td>
                                        <td>@user.Department</td>
                                        <td class="text-success">@user.Status</td>
                                        <td class="p-0 pt-2 px-1 d-flex">
                                            <div class="mb-2">
                                                <button type="button" data-bs-toggle="modal"
                                                        data-bs-target="#exampleModalGoalEdit" class="border-0 bg-transparent" onclick="loadUserData(@user.UserId)">
                                                    <i class="bi bi-pencil-square text-warning"></i>
                                                </button>
                                                <form method="post" asp-action="editDataForGoalBaseTimesheet"
                                                  asp-controller="VolunteeringTimeSheet">

                                                    <div class="modal fade" id="exampleModalGoalEdit" tabindex="-1"
                                                         aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                        <div class="modal-dialog modal-dialog-centered">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" id="exampleModalLabel">
                                                                        Please
                                                                        input below volunteering Goal
                                                                    </h5>
                                                                    <button type="button" class="btn-close"
                                                                            data-bs-dismiss="modal" aria-label="Close"></button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <input hidden  id="userid">
                                                                    @*value="@goalMission.MissionId"*@
                                                                   
                                                                    <div class="mb-3">
                                                                        <label for="exampleFormControlInput1"
                                                                               class="form-label">FirstName</label>
                                                                        <input type="text" class="form-control "
                                                                               id="fName" value="fName" >
                                                                    </div>
                                                                    <div class="mb-3">
                                                                        <label for="exampleFormControlInput1"
                                                                               class="form-label">LastName</label>
                                                                        <input type="text" class="form-control "
                                                                               id="lName" value="lName">
                                                                    </div>
                                                                    <div class="mb-3">
                                                                        <label for="exampleFormControlInput1"
                                                                               class="form-label">Email</label>
                                                                        <input type="email"
                                                                               class="form-control "
                                                                               id="email" value="email">
                                                                    </div>
                                                                    <div class="mb-3">
                                                                        <label for="exampleFormControlInput1"
                                                                               class="form-label">Employee Id</label>
                                                                        <input type="number"
                                                                               class="form-control "
                                                                               id="empId" value="empId">
                                                                    </div> 
                                                                    <div class="mb-3">
                                                                        <label for="exampleFormControlInput1"
                                                                               class="form-label">DepartMent</label>
                                                                        <input type="text"
                                                                               class="form-control "
                                                                               id="dept"  value="dept">
                                                                    </div>
                                                                     <div class="mb-3">
                                                                        <label for="exampleFormControlInput1"
                                                                               class="form-label">Status</label>
                                                                        <input type="number"
                                                                               class="form-control "
                                                                               id="status" value="status">
                                                                    </div>
                                                                    
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-outline-dark"
                                                                            style="border-radius:50px"
                                                                            data-bs-dismiss="modal">
                                                                        Cancel
                                                                    </button>
                                                                    <button type="submit" class="btn btn-outline-warning"
                                                                            style="border-radius:50px">
                                                                        Save
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                            <div>
                                                <button type="button" data-bs-toggle="modal"
                                                        data-bs-target="#exampleModalGoal"
                                                        class="border-0 bg-transparent">
                                                    <i class="bi bi-trash3 text-dark"></i>
                                                </button>
                                                <form method="post" asp-action="deleteDataForGoal"
                                                  asp-controller="VolunteeringTimeSheet">

                                                    <div class="modal fade" id="exampleModalGoal" tabindex="-1"
                                                         aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                        <div class="modal-dialog modal-dialog-centered">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" id="exampleModalLabel">Confirm Delete</h5>
                                                                    <button type="button" class="btn-close"
                                                                            data-bs-dismiss="modal" aria-label="Close"></button>
                                                                </div>
                                                                <div class="modal-body">

                                                                    <div class="mb-3">
                                                                        <label for="exampleFormControlInput1"
                                                                               class="form-label">Are you sure you want to delete??</label>
                                                                    </div>

                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-outline-dark"
                                                                            style="border-radius:50px"
                                                                            data-bs-dismiss="modal">
                                                                        Cancel
                                                                    </button>
                                                                    <button type="submit" class="btn btn-outline-warning"
                                                                            style="border-radius:50px">
                                                                        Delete
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>

                                        </td>
                                    </tr>
                                 
                                   
                                }
                                
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="row float-end">
                    <div class="col-12 ">
                        <nav aria-label="Page navigation example">
                            <ul class="pagination pagination-circle pg-blue">
                                <li class="page-item disabled"><a class="page-link">First</a></li>
                                <li class="page-item disabled">
                                    <a class="page-link" aria-label="Previous">
                                        <span aria-hidden="true">&laquo;</span>
                                    </a>
                                </li>
                                <li class="page-item active"><a class="page-link">1</a></li>
                                <li class="page-item"><a class="page-link">2</a></li>
                                <li class="page-item"><a class="page-link">3</a></li>
                                <li class="page-item"><a class="page-link">4</a></li>
                                <li class="page-item"><a class="page-link">5</a></li>
                                <li class="page-item">
                                    <a class="page-link" aria-label="Next">
                                        <span aria-hidden="true">&raquo;</span>
                                    </a>
                                </li>
                                <li class="page-item"><a class="page-link">Last</a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>

            <!--below div tag is for offcanvas-->
            <div class="d-block d-md-none offcanvas offcanvas-start adminofcanvasdiv h-100" data-bs-scroll="true"
                 tabindex="-1" id="Adminoffcanvas" aria-labelledby="offcanvasWithBothOptionsLabel">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title fw-bold fs-6 text-white text-break" id="offcanvasWithBothOptionsLabel">
                        NAVIGATION
                    </h5>
                    <button type="button" class="border-0" data-bs-dismiss="offcanvas" aria-label="Close"
                            style="background-color:#F88634;">
                        <i class="bi bi-x-lg"></i>
                    </button>
                </div>
                <div class="offcanvas-body">
                    <div class="dropdown">
                        <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown"
                                aria-expanded="false">
                            <img src="~/Assets/user1.png" alt="mdo" width="40" height="40"
                                 class="rounded-circle loginimg">
                            <span class="text-white">Dropdown button</span>
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#">Action</a></li>
                            <li><a class="dropdown-item" href="#">Another action</a></li>
                            <li><a class="dropdown-item" href="#">Something else here</a></li>
                        </ul>
                    </div>

                    <ul class="nav nav-pills flex-column mb-auto mt-3">

                        <li class="nav-item">
                            <a href="#1" class="nav-link sidebarcontent active " aria-current="page">

                                <i class="bi bi-person-fill sidebar-img "></i>
                                <lable class="d-block d-lg-block d-md-none">User</lable>
                            </a>
                        </li>
                        <li>
                            <a href="#2" class="nav-link sidebarcontent ">

                                <i class="bi bi-file-earmark-text-fill sidebar-img me-2"></i>

                                <lable class="d-block d-lg-block d-md-none"> CMS Page</lable>
                            </a>
                        </li>
                        <li>
                            <a href="#3" class="nav-link sidebarcontent">

                                <i class="bi bi-bullseye sidebar-img me-2"></i>

                                <lable class="d-block d-lg-block d-md-none"> Mission</lable>
                            </a>
                        </li>
                        <li>
                            <a href="#4" class="nav-link sidebarcontent">


                                <i class="bi bi-grid-1x2-fill sidebar-img me-2"></i>

                                <lable class="d-block d-lg-block d-md-none">Mission Theme</lable>
                            </a>
                        </li>
                        <li>
                            <a href="#5" class="nav-link sidebarcontent">

                                <i class="bi bi-tools sidebar-img me-2"></i>

                                <lable class="d-block d-lg-block d-md-none">Mission Skills</lable>
                            </a>
                        </li>
                        <li>
                            <a href="#6" class="nav-link sidebarcontent ">

                                <i class="bi bi-folder-fill sidebar-img me-2"></i>

                                <lable class="d-block d-lg-block d-md-none">Mission Application</lable>
                            </a>
                        </li>
                        <li>
                            <a href="#7" class="nav-link sidebarcontent">

                                <i class="bi bi-book-half sidebar-img me-2"></i>

                                <lable class="d-block d-lg-block d-md-none">Story</lable>
                            </a>
                        </li>
                        <li>
                            <a href="#8" class="nav-link sidebarcontent">

                                <i class="bi bi-border-style sidebar-img me-2"></i>

                                <lable class="d-block d-lg-block d-md-none">Banner Management</lable>
                            </a>
                        </li>

                    </ul>

                </div>
            </div>
        </div>

    </div>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
            integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
            crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

        <script>

            function loadUserData(userId){
            $.ajax({
                method: 'GET',
                url: '/Admin/getDataForUser',
                data: {
                    uId: userId
                },
                dataType: 'json',
                success: function (data) {
                    //for date only
                 

                    $('#fName').val(data.firstName);
                    $('#lName').val(data.lastName);
                    $('#email').val(data.email);
                    $('#empId').val(data.employeeId);
                    $('#dept').val(data.department);
                    $('#status').val(data.status);
                    $('#userid').val(data.userId);

                },
                error: function (xhr, status, error) {
                    // Handle errors
                }
            });
            }
        </script>
</body>
</html>